(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],[,,,,,,,,,,function(t,e,s){t.exports=s(18)},,,,,function(t,e,s){},function(t,e,s){},function(t,e,s){},function(t,e,s){"use strict";s.r(e);var a=s(0),i=s.n(a),r=s(9),n=s.n(r),o=(s(15),s(1)),h=s(2),p=s(3),c=s(4),u=s(7),l=s(6),d=(s(16),s(5)),f=function(){function t(e){Object(h.a)(this,t),this.length=e,this.hitList=Array(e).fill(!1)}return Object(p.a)(t,[{key:"hit",value:function(t){if(t<0||t>=this.length)throw new Error("Illegal Argument Exception");if(this.hitList[t])throw new Error("Already hit");var e=Object(d.a)(this.hitList);e[t]=!0,this.hitList=e}},{key:"isSunk",value:function(){return this.hitList.reduce((function(t,e){return t&&e}),!0)}}]),t}(),g=function(){function t(e){Object(h.a)(this,t),this.size=10;var s,a=new f(5),i=new f(4),r=new f(3),n=new f(3),o=new f(2);this.ships=[{ship:a,pos:[0,0,!0]},{ship:i,pos:[0,2,!0]},{ship:r,pos:[0,4,!0]},{ship:n,pos:[0,6,!0]},{ship:o,pos:[0,8,!0]}],this.shipLocs=this.updateShipLocs(),this.hitMatrix=[];for(var p=0;p<this.size;p++)s=Array(this.size).fill(!1),this.hitMatrix.push(s);this.sunken=0}return Object(p.a)(t,[{key:"placeShip",value:function(t,e,s,a){if(e>10||s>10)throw new Error("Ship off board");if(!(a&&e+this.ships[t].ship.length>10)&&(a||!(s+this.ships[t].ship.length>10))){var i=Object(d.a)(this.ships[t].pos);this.ships[t].pos=[-10,-10,!0],this.shipLocs=this.updateShipLocs();try{return this.ships[t].pos=[e,s,a],this.shipLocs=this.updateShipLocs(),!0}catch(r){return this.ships[t].pos=Object(d.a)(i),this.shipLocs=this.updateShipLocs(),!1}}}},{key:"rotateShip",value:function(t){this.placeShip(t,this.ships[t].pos[0],this.ships[t].pos[1],!this.ships[t].pos[2])}},{key:"placeShipsRandom",value:function(){for(var t=0;t<this.ships.length;t++)for(;;){var e=[Math.floor(Math.random()*this.size),Math.floor(Math.random()*this.size),Math.random()>.5];if(this.placeShip.apply(this,[t].concat(e)))break}}},{key:"receiveAttack",value:function(t,e){if(t<0||t>this.size||e<0||e>this.size)throw Error("Illegal Argument Exception");if(this.hitMatrix[t][e])throw Error("Already attacked");this.hitMatrix[t][e]=!0;var s=this.shipLocs[t][e];if(!1!==s){var a=this.ships[s],i=a.pos[2]?t-a.pos[0]:e-a.pos[1];return a.ship.hit(i),a.ship.isSunk()&&this.sunken++,!0}return!1}},{key:"allSunk",value:function(){return this.sunken===this.ships.length}},{key:"updateShipLocs",value:function(){for(var t,e=[],s=0;s<this.size;s++)t=Array(this.size).fill(!1),e.push(t);return this.ships.forEach((function(t,s){if(!(t.pos[0]<0))if(t.pos[2])for(var a=0;a<t.ship.length;a++){if(!1!==e[t.pos[0]+a][t.pos[1]])throw Error("collision");e[t.pos[0]+a][t.pos[1]]=s}else for(var i=0;i<t.ship.length;i++){if(!1!==e[t.pos[0]][t.pos[1]+i])throw Error("collision");e[t.pos[0]][t.pos[1]+i]=s}})),e}}]),t}(),m=function(){function t(){Object(h.a)(this,t),this.oppBoard=new g}return Object(p.a)(t,[{key:"getBoard",value:function(){return Object(o.a)({},this.oppBoard)}},{key:"randomize",value:function(){this.oppBoard.placeShipsRandom()}},{key:"attack",value:function(t,e){return this.oppBoard.receiveAttack(t,e)}},{key:"randomAttack",value:function(){var t=[Math.floor(Math.random()*this.oppBoard.size),Math.floor(Math.random()*this.oppBoard.size)];try{var e;return(e=this.oppBoard).receiveAttack.apply(e,t)}catch(s){return this.randomAttack()}}},{key:"wonGame",value:function(){return this.oppBoard.allSunk()}}]),t}(),v=(s(17),function(t){Object(u.a)(s,t);var e=Object(l.a)(s);function s(t){var a;Object(h.a)(this,s),a=e.call(this,t);var i=new m;return a.state={player:i,dragging:!1},a.handleClick=a.handleClick.bind(Object(c.a)(a)),a.handleDrag=a.handleDrag.bind(Object(c.a)(a)),a.handleDrop=a.handleDrop.bind(Object(c.a)(a)),a}return Object(p.a)(s,[{key:"shouldComponentUpdate",value:function(){return!this.props.winner}},{key:"handleClick",value:function(t,e){if(this.props.cpu&&this.props.pregame&&!1!==this.state.player.getBoard().shipLocs[t][e]&&(this.state.player.oppBoard.rotateShip(this.state.player.getBoard().shipLocs[t][e]),this.setState(Object(o.a)({},this.state))),!(this.props.cpu||this.props.turn||this.props.pregame))try{this.state.player.attack(t,e),this.setState(Object(o.a)({},this.state)),this.props.nextTurn(this.state.player.wonGame())}catch(s){console.log("Location already clicked")}}},{key:"handleDrag",value:function(t,e){this.props.cpu&&this.props.pregame&&!1!==this.state.player.getBoard().shipLocs[t][e]&&this.setState(Object(o.a)(Object(o.a)({},this.state),{},{dragging:this.state.player.getBoard().shipLocs[t][e]}))}},{key:"handleDrop",value:function(t,e){this.props.cpu&&this.props.pregame&&(this.state.player.oppBoard.placeShip(this.state.dragging,t,e,this.state.player.oppBoard.ships[this.state.dragging].pos[2]),this.setState(Object(o.a)(Object(o.a)({},this.state),{},{dragging:!1})))}},{key:"componentDidMount",value:function(){!this.props.cpu&&this.props.pregame&&this.state.player.randomize()}},{key:"componentDidUpdate",value:function(){this.props.cpu&&this.props.turn&&(this.state.player.randomAttack(),this.setState(Object(o.a)({},this.state)),this.props.nextTurn(this.state.player.wonGame()))}},{key:"render",value:function(){for(var t=this,e=[],s=function(s){for(var a=function(a){var r="",n="";t.props.cpu&&!1!==t.state.player.getBoard().shipLocs[s][a]&&(r="ship"),!1!==t.state.player.getBoard().shipLocs[s][a]&&t.state.player.oppBoard.ships[t.state.player.getBoard().shipLocs[s][a]].ship.isSunk()?(r="sunken",n="X"):!1!==t.state.player.getBoard().shipLocs[s][a]&&t.state.player.getBoard().hitMatrix[s][a]?(r="hit",n="X"):t.state.player.getBoard().hitMatrix[s][a]&&(n="."),e.push(i.a.createElement("div",{key:[s,a],className:r,draggable:!1!==t.state.player.getBoard().shipLocs[s][a],onDragStart:function(){return t.handleDrag(s,a)},onDragOver:function(t){return t.preventDefault()},onClick:function(){return t.handleClick(s,a)},onDrop:function(){return t.handleDrop(s,a)}},n))},r=0;r<10;r++)a(r)},a=0;a<10;a++)s(a);return i.a.createElement("div",{className:"container"},e)}}]),s}(i.a.Component)),y=function(t){Object(u.a)(s,t);var e=Object(l.a)(s);function s(t){var a;return Object(h.a)(this,s),(a=e.call(this,t)).startGame=function(){a.state.pregame&&a.setState(Object(o.a)(Object(o.a)({},a.state),{},{pregame:!1}))},a.state={turn:!1,pregame:!0,winner:""},a.nextTurn=a.nextTurn.bind(Object(c.a)(a)),a}return Object(p.a)(s,[{key:"nextTurn",value:function(t){this.setState(Object(o.a)(Object(o.a)({},this.state),{},{turn:!this.state.turn,winner:this.state.winner||(t?"Game Over":"")}))}},{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement("h1",null,"Battleship"),i.a.createElement("div",{className:"boards"},i.a.createElement(v,{pregame:this.state.pregame,cpu:!0,nextTurn:this.nextTurn,turn:this.state.turn,winner:!!this.state.winner}),i.a.createElement(v,{pregame:this.state.pregame,cpu:!1,nextTurn:this.nextTurn,turn:this.state.turn,winner:!!this.state.winner})),i.a.createElement("button",{onClick:this.startGame},"Start Game"),i.a.createElement("h2",null,this.state.winner))}}]),s}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}],[[10,1,2]]]);
//# sourceMappingURL=main.3a912aee.chunk.js.map